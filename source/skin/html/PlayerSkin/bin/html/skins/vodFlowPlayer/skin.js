/*
 * Name: VodFlowPlayer SewisePlayerSkin framework V1.0.0
 * Author: Jack Zhang
 * Website: http://www.sewise.com/
 * Date: 12th June 2014
 * Copyright: 2014, Sewise
 * 
 */

(function(a){a.SewisePlayerSkin={version:"1.0.0"};a.SewisePlayer=a.SewisePlayer||{}})(window);(function(a){a.SewisePlayer.IVodPlayer=a.SewisePlayer.IVodPlayer||{play:function(){},pause:function(){},stop:function(){},seek:function(){},changeClarity:function(){},setVolume:function(){},toPlay:function(){},duration:function(){},playTime:function(){},type:function(){},showTextTip:function(){},hideTextTip:function(){},muted:function(){}}})(window);(function(a){a.SewisePlayerSkin.IVodSkin=a.SewisePlayerSkin.IVodSkin||{player:function(){},started:function(){},paused:function(){},stopped:function(){},seeking:function(){},buffering:function(){},bufferProgress:function(){},loadedProgress:function(){},programTitle:function(){},duration:function(){},playTime:function(){},startTime:function(){},loadSpeed:function(){},initialClarity:function(){},lang:function(){},logo:function(){},clarityButton:function(){},timeDisplay:function(){},controlBarDisplay:function(){},
topBarDisplay:function(){},timeUpdate:function(){},volume:function(){},clarityButton:function(){},timeDisplay:function(){},controlBarDisplay:function(){},topBarDisplay:function(){},customStrings:function(){}}})(window);(function(){SewisePlayerSkin.Utils={stringer:{secondsToHMS:function(a){if(!(0>a)){var c=this.time2FigFill(Math.floor(a/3600)),m=this.time2FigFill(a/60%60),a=this.time2FigFill(a%60);return c+":"+m+":"+a}},secondsToMS:function(a){if(!(0>a)){var c=this.time2FigFill(a/60),a=this.time2FigFill(a%60);return c+":"+a}},time2FigFill:function(a){var c,a=Math.floor(a);10>a?c="0"+a:c=""+a;return c},dateToTimeString:function(){var a=new Date,c=a.getFullYear(),m=a.getMonth()+1,i=a.getDate(),o=this.time2FigFill(a.getHours()),
g=this.time2FigFill(a.getMinutes()),a=this.time2FigFill(a.getSeconds());return c+"-"+m+"-"+i+" "+o+":"+g+":"+a}}}})();(function(a){SewisePlayerSkin.ElementObject=function(){this.$sewisePlayerUi=a(".sewise-player-ui");this.$container=this.$sewisePlayerUi.parent();this.$video=this.$container.find("video").get(0);this.$controlbar=this.$sewisePlayerUi.find(".controlbar");this.$playBtn=this.$sewisePlayerUi.find(".controlbar-btns-play");this.$pauseBtn=this.$sewisePlayerUi.find(".controlbar-btns-pause");this.$stopBtn=this.$sewisePlayerUi.find(".controlbar-btns-stop");this.$fullscreenBtn=this.$sewisePlayerUi.find(".controlbar-btns-fullscreen");
this.$normalscreenBtn=this.$sewisePlayerUi.find(".controlbar-btns-normalscreen");this.$soundopenBtn=this.$sewisePlayerUi.find(".controlbar-btns-soundopen");this.$soundcloseBtn=this.$sewisePlayerUi.find(".controlbar-btns-soundclose");this.$volumelineVolume=this.$sewisePlayerUi.find(".controlbar-volumeline-volume");this.$volumelineDragger=this.$sewisePlayerUi.find(".controlbar-volumeline-dragger");this.$volumelinePoint=this.$sewisePlayerUi.find(".controlbar-volumeline-point");this.$playtime=this.$sewisePlayerUi.find(".controlbar-playtime");
this.$totaltime=this.$sewisePlayerUi.find(".controlbar-totaltime");this.$controlBarProgress=this.$sewisePlayerUi.find(".controlbar-progress");this.$progressPlayedLine=this.$sewisePlayerUi.find(".controlbar-progress-playedline");this.$progressPlayedPoint=this.$sewisePlayerUi.find(".controlbar-progress-playpoint");this.$progressLoadedLine=this.$sewisePlayerUi.find(".controlbar-progress-loadedline");this.$progressSeekLine=this.$sewisePlayerUi.find(".controlbar-progress-seekline");this.$logo=this.$sewisePlayerUi.find(".logo");
this.$logoIcon=this.$sewisePlayerUi.find(".logo-icon");this.$topbar=this.$sewisePlayerUi.find(".topbar");this.$programTitle=this.$sewisePlayerUi.find(".topbar-program-title");this.$topbarClock=this.$sewisePlayerUi.find(".topbar-clock");this.$buffer=this.$sewisePlayerUi.find(".buffer");this.$bigPlayBtn=this.$sewisePlayerUi.find(".big-play-btn");this.defStageWidth=this.$container.width();this.defStageHeight=this.$container.height()}})(window.jQuery);(function(a){SewisePlayerSkin.ElementLayout=function(c){function m(){null!=document.fullscreenElement||null!=document.msFullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement?r.fullScreen():r.normalScreen()}var i=c.$container,o=c.$controlBarProgress,g=c.$playtime,r=this,f=c.defStageWidth,C=c.defStageHeight,j=parseInt(f)-265;0>j&&(j+=g.width(),g.hide());o.css("width",j);document.addEventListener("fullscreenchange",m);document.addEventListener("MSFullscreenChange",
m);document.addEventListener("mozfullscreenchange",m);document.addEventListener("webkitfullscreenchange",m);this.fullScreen=function(c){if("not-support"==c){var c=a(window).width(),j=a(window).height();i.css("width",c);i.css("height",j)}else i.css("width","100%"),i.css("height","100%");c=parseInt(i.width())-265;0>c?(c+=g.width(),g.hide()):g.show();o.css("width",c)};this.normalScreen=function(){i.css("width",f);i.css("height",C);j=parseInt(f)-265;0>j?(j+=g.width(),g.hide()):g.show();o.css("width",
j)}}})(window.jQuery);(function(){SewisePlayerSkin.LogoBox=function(a){var c=a.$logoIcon;this.setLogo=function(a){c.css("background","url("+a+") 0px 0px no-repeat");c.attr("href","http://www.sewise.com/")}}})(window.jQuery);(function(){SewisePlayerSkin.TopBar=function(a){var c=a.$topbar,m=a.$programTitle,i=a.$topbarClock;setInterval(function(){var a=SewisePlayerSkin.Utils.stringer.dateToTimeString();i.text(a)},1E3);this.setTitle=function(a){m.text(a)};this.show=function(){c.css("visibility","visible")};this.hide=function(){c.css("visibility","hidden")};this.hide2=function(){c.hide()}}})(window.jQuery);(function(a){SewisePlayerSkin.ControlBar=function(c,m,i){function o(b){b=k+(b.pageX-w);0<b&&b<s&&(t.css("width",b),n.css("left",b-D/2))}function g(b){x.unbind("mousemove",o);a(document).unbind("mouseup",g);K=b.pageX;w!=K&&(k=t.width(),y=k/s,h.seek(y*z));E=!1}function r(b){e=b.originalEvent;1==e.targetTouches.length&&(e.preventDefault(),b=k+(e.targetTouches[0].pageX-w),0<b&&b<s&&(t.css("width",b),n.css("left",b-D/2)))}function f(b){e=b.originalEvent;n.unbind("touchmove",r);n.unbind("touchend",f);if(1==
e.changedTouches.length)K=e.changedTouches[0].pageX,w!=K&&(k=t.width(),y=k/s,h.seek(y*z));E=!1}function C(b){b=d+(b.pageX-A);0<b&&b<p&&(q.css("width",b),l.css("left",b-v/2))}function j(b){x.unbind("mousemove",C);a(document).unbind("mouseup",j);L=b.pageX;A!=L&&(d=q.width(),u=d/p,h.setVolume(u),M())}function U(b){e=b.originalEvent;1==e.targetTouches.length&&(e.preventDefault(),b=d+(e.targetTouches[0].pageX-A),0<b&&b<p&&(q.css("width",b),l.css("left",b-v/2)))}function V(b){e=b.originalEvent;l.unbind("touchmove",
U);l.unbind("touchend",V);if(1==e.changedTouches.length)L=e.changedTouches[0].pageX,A!=L&&(d=q.width(),u=d/p,h.setVolume(u),M())}function M(){0<u?(h.muted(!1),F.show(),B.hide()):(h.muted(!0),F.hide(),B.show())}var x=c.$container,R=c.$video,N=c.$controlbar,O=c.$playBtn,G=c.$pauseBtn,Y=c.$stopBtn,P=c.$fullscreenBtn,H=c.$normalscreenBtn,F=c.$soundopenBtn,B=c.$soundcloseBtn,q=c.$volumelineVolume,I=c.$volumelineDragger,l=c.$volumelinePoint,Z=c.$playtime,$=c.$totaltime,t=c.$progressPlayedLine,n=c.$progressPlayedPoint,
aa=c.$progressLoadedLine,J=c.$progressSeekLine,ba=c.$buffer,Q=c.$bigPlayBtn,h,z=0.1,S=0,W="00:00:00",X="00:00:00",D=0,E=!1,w=0,K=0,k=0,s=0,y=0,T=!0,v=0,p=0,d=0,u=0,A=0,L=0,D=n.width(),s=J.width(),v=l.width(),p=I.width();G.hide();H.hide();B.hide();ba.hide();N.click(function(b){b.originalEvent.stopPropagation()});x.click(function(){T?(N.css("visibility","hidden"),i.hide(),T=!1):(N.css("visibility","visible"),i.show(),T=!0)});O.click(function(){h.play()});G.click(function(){h.pause()});Y.click(function(){h.stop()});
Q.click(function(b){b.originalEvent.stopPropagation();h.play()});P.click(function(){P.hide();H.show();var b=x.get(0);b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():R.webkitEnterFullscreen?(R.play(),R.webkitEnterFullscreen(),P.show(),H.hide()):m.fullScreen("not-support")});H.click(function(){P.show();H.hide();document.exitFullscreen?document.exitFullscreen():
document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():m.normalScreen()});F.click(function(){h.muted(!0);F.hide();B.show();q.css("width",0);l.css("left",-v/2)});B.click(function(){h.muted(!1);F.show();B.hide();q.css("width",d);l.css("left",d-v/2)});J.mousedown(function(b){k=b.pageX-b.target.getBoundingClientRect().left;s=J.width();t.css("width",k);n.css("left",k-D/2);y=k/s;
h.seek(y*z)});n.mousedown(function(b){this.blur();E=!0;w=b.pageX;k=t.width();s=J.width();x.bind("mousemove",o);a(document).bind("mouseup",g)});n.bind("touchstart",function(b){e=b.originalEvent;n.blur();b=e.targetTouches[0];E=!0;w=b.pageX;k=t.width();s=J.width();n.bind("touchmove",r);n.bind("touchend",f)});I.mousedown(function(b){d=b.pageX-b.target.getBoundingClientRect().left;p=I.width();q.css("width",d);l.css("left",d-v/2);u=d/p;h.setVolume(u);M()});l.mousedown(function(b){this.blur();A=b.pageX;
d=q.width();p=I.width();x.bind("mousemove",C);a(document).bind("mouseup",j)});l.bind("touchstart",function(b){e=b.originalEvent;l.blur();A=e.targetTouches[0].pageX;d=q.width();p=I.width();l.bind("touchmove",U);l.bind("touchend",V)});this.setPlayer=function(b){h=b};this.started=function(){O.hide();G.show();Q.hide()};this.paused=function(){O.show();G.hide();Q.show()};this.stopped=function(){O.show();G.hide();Q.show()};this.setDuration=function(b){z=b;X=SewisePlayerSkin.Utils.stringer.secondsToMS(z);
$.text(X)};this.timeUpdate=function(b){S=b;W=SewisePlayerSkin.Utils.stringer.secondsToMS(S);Z.text(W);E||(k=100*(S/z)+"%",t.css("width",k),b=t.width()-D/2,n.css("left",b))};this.loadProgress=function(b){aa.css("width",100*b+"%")};this.initVolume=function(b){u=b;d=p*u;q.css("width",d);l.css("left",d-v/2);M()};this.hide2=function(){N.hide()}}})(window.jQuery);(function(a,c){c(document).ready(function(){var a=SewisePlayer.IVodPlayer,c=new SewisePlayerSkin.ElementObject,o=new SewisePlayerSkin.ElementLayout(c),g=new SewisePlayerSkin.LogoBox(c),r=new SewisePlayerSkin.TopBar(c),f=new SewisePlayerSkin.ControlBar(c,o,r);SewisePlayerSkin.IVodSkin.player=function(c){a=c;f.setPlayer(a)};SewisePlayerSkin.IVodSkin.started=function(){f.started()};SewisePlayerSkin.IVodSkin.paused=function(){f.paused()};SewisePlayerSkin.IVodSkin.stopped=function(){f.stopped()};SewisePlayerSkin.IVodSkin.duration=
function(a){f.setDuration(a)};SewisePlayerSkin.IVodSkin.timeUpdate=function(a){f.timeUpdate(a)};SewisePlayerSkin.IVodSkin.loadedProgress=function(a){f.loadProgress(a)};SewisePlayerSkin.IVodSkin.programTitle=function(a){r.setTitle(a)};SewisePlayerSkin.IVodSkin.logo=function(a){g.setLogo(a)};SewisePlayerSkin.IVodSkin.volume=function(a){f.initVolume(a)};SewisePlayerSkin.IVodSkin.clarityButton=function(){};SewisePlayerSkin.IVodSkin.timeDisplay=function(){};SewisePlayerSkin.IVodSkin.controlBarDisplay=
function(a){"enable"!=a&&f.hide2()};SewisePlayerSkin.IVodSkin.topBarDisplay=function(a){"enable"!=a&&r.hide2()};SewisePlayerSkin.IVodSkin.customStrings=function(){};try{SewisePlayer.CommandDispatcher.dispatchEvent({type:SewisePlayer.Events.PLAYER_SKIN_LOADED,playerSkin:SewisePlayerSkin.IVodSkin})}catch(C){console.log("No Main Player")}})})(window,window.jQuery);
